:root{
  --accent:#375bd4;
  --muted:#6f6f6f;
  font-family: "Helvetica Neue", Arial, sans-serif;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  background: linear-gradient(180deg,#eef3fb,#e6eefb);
  display:flex;
  flex-direction:column;
  align-items:center;
  transition:filter .12s;
}

/* topbar */
.topbar{
  position:fixed; top:0; left:0; right:0;
  height:52px; display:flex;align-items:center;justify-content:space-between;
  padding:0 18px;background:#f1f3f5;border-bottom:1px solid rgba(0,0,0,0.05); z-index:1000;
  font-weight:700;
}

/* main */
.container{width:100%;max-width:1100px;margin-top:72px;padding:18px;display:flex;flex-wrap:wrap;gap:18px;justify-content:center}

/* Card */
.card{width:340px;background:#fff;border-radius:10px;box-shadow:0 8px 20px rgba(20,30,60,0.06);border:1px solid rgba(0,0,0,0.04);overflow:hidden}
.card.wide{width:100%;max-width:1000px}
.card-top{background:#26325a;color:#fff;padding:10px;text-align:center}
.card-body{padding:16px;display:flex;flex-direction:column;gap:12px}

/* fields & controls */
.field{display:flex;flex-direction:column;gap:6px}
.label-text{font-size:13px;color:var(--muted)}
input[type="text"],input[type="date"],input[type="range"]{padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);font-size:14px}
.controls{display:flex;gap:10px;justify-content:space-between}
.btn-login{background:var(--accent);color:#fff;border:0;border-radius:8px;padding:10px 14px;cursor:pointer;font-weight:700}
.btn-light{background:#f1f3f5;border:1px solid rgba(0,0,0,0.04);padding:9px 12px;border-radius:8px;cursor:pointer}

/* exam layout */
.exam-body{display:flex;gap:18px;padding:16px}
.panel{flex:1;display:flex;flex-direction:column;gap:8px}
.panel-title{text-align:center;font-weight:700;color:#333}
/* palette grid: make items slightly larger for better touch targets */
.question-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;padding:12px;border-radius:8px;background:#fafafa;min-height:420px}
.q-item{background:#fff;border:1px solid rgba(0,0,0,0.06);padding:14px;border-radius:8px;text-align:center;cursor:pointer;font-weight:700;color:#333;font-size:16px;min-height:56px;display:flex;align-items:center;justify-content:center}
.q-item.answered{background:linear-gradient(180deg,#e8f9ee,#e2f5ea);border-color:rgba(35,150,90,0.12);color:#0b6b3a}
.q-item.current{box-shadow:0 6px 18px rgba(60,100,200,0.12);border:1px solid rgba(55,91,212,0.18)}

/* exam footer */
.exam-footer{display:flex;justify-content:space-between;align-items:center;padding:12px;border-top:1px solid rgba(0,0,0,0.04)}
.legend{display:flex;gap:12px;align-items:center}
.legend-item{display:flex;gap:6px;align-items:center;color:var(--muted);font-size:13px}
.dot{width:12px;height:12px;border-radius:50%;display:inline-block;border:1px solid rgba(0,0,0,0.06)}
.dot.empty{background:#fff}
.dot.answered{background:#1fb161}
.dot.current{background:#3b6bd8}

/* question view */
.question-body{display:flex;gap:18px;padding:16px}
.q-left{flex:1;background:#fff;border-radius:8px;padding:12px;border:1px solid rgba(0,0,0,0.04)}
.q-right{width:360px;background:#fff;border-radius:8px;padding:12px;border:1px solid rgba(0,0,0,0.04)}
.q-stem .q-label{font-weight:700;margin-bottom:8px}
.q-stem .q-content{background:#f8fbff;border-radius:6px;padding:12px;border:1px solid rgba(0,0,0,0.03);color:#333;line-height:1.5}

/* instruction above image */
.q-instruction{
  font-size:16px;
  font-weight:700;
  margin-bottom:10px;
  color:#222;
}

/* image / audio area: increase image max size for better visibility */
.q-image-wrap{display:flex;justify-content:center;align-items:center;margin-bottom:12px;min-height:160px}
.q-image-wrap img{max-width:80%;height:auto;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:#fff;padding:8px;cursor:pointer;transition:transform .15s}
.q-image-wrap img:active{transform:scale(0.98)}

/* audio icon & play button */
.audio-icon{display:flex;align-items:center;gap:10px;background:#fff;padding:8px 12px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)}
.headphone-svg{font-size:28px}
.play-btn{background:var(--accent);color:#fff;border:0;border-radius:6px;padding:8px 12px;cursor:pointer;font-weight:700;font-size:16px}
.play-btn[aria-pressed="true"]{background:#e74c3c}
.play-btn:disabled{background:#ccc;cursor:not-allowed;color:#666}
.play-btn:focus{outline:3px solid rgba(55,91,212,0.15)}
.play-btn[disabled]{opacity:.9}
.audio-status{font-size:13px;color:var(--muted)}

/* small thumbnail inside audio-icon */
.audio-icon img.small-thumb{width:44px;height:44px;border-radius:6px;object-fit:cover;border:1px solid rgba(0,0,0,0.04)}

/* options */
.options{display:flex;flex-direction:column;gap:10px}
.opt-btn{background:#fbfcff;border:1px solid rgba(0,0,0,0.06);padding:12px;border-radius:8px;text-align:left;cursor:pointer;font-size:14px;white-space:normal}
.opt-btn.selected{background:linear-gradient(180deg,#e8f9ee,#e2f5ea);border-color:rgba(35,150,90,0.18);font-weight:700}

/* underline style */
.uline { text-decoration: underline; text-decoration-thickness: 2px; text-underline-offset: 2px; }

/* footer positions */
.question-footer{
  position:relative;
  height:64px;
  border-top:1px solid rgba(0,0,0,0.04);
  padding:12px 18px;
}
.question-footer .left-controls{position:absolute;left:18px;bottom:12px;}
.question-footer .center-controls{position:absolute;left:50%;transform:translateX(-50%);bottom:12px;}
.question-footer .right-controls{position:absolute;right:18px;bottom:12px}

/* Lightbox modal */
.img-modal{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:none;align-items:center;justify-content:center;z-index:2000}
.img-modal[aria-hidden="false"]{display:flex}
.img-modal-content{max-width:95%;max-height:95%;padding:12px}
.img-modal-content img{max-width:100%;max-height:100%;border-radius:8px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}

/* responsive */
@media (max-width:900px){ .question-grid{grid-template-columns:repeat(4,1fr)} .q-image-wrap{min-height:140px} }
@media (max-width:640px){ .card{width:100%} .exam-body{flex-direction:column} .question-grid{grid-template-columns:repeat(3,1fr)} .q-image-wrap{min-height:120px} }
/* ---- Submit photo overlay (image + Sinhala text + Continue) ---- */
.submit-photo-overlay{
  position:fixed; inset:0; display:flex;align-items:center;justify-content:center;
  background: rgba(0,0,0,0.55); z-index:4000; padding:18px;
}
.spo-panel{ width:100%; max-width:980px; border-radius:10px; overflow:hidden; }
.spo-image-wrap{ position:relative; background:#fff; border-radius:8px; overflow:hidden; display:flex; align-items:stretch; }
.spo-image{ width:60%; height:100%; object-fit:cover; display:block; }
.spo-text{ width:40%; padding:22px; display:flex; flex-direction:column; gap:12px; justify-content:center; background:linear-gradient(180deg,#ffffff,#fbfdff); }
.spo-text h2{ margin:0; font-size:20px; color:#222; text-align:left; }
.spo-text p{ margin:0; color:#333; line-height:1.45; font-size:15px; }
.spo-actions{ display:flex; gap:10px; margin-top:10px; }
.spo-actions .btn-login{ padding:10px 18px; }
.spo-actions .btn-light{ padding:10px 14px; }

/* make responsive: on small screens stack image above text */
@media (max-width:800px){
  .spo-image{ width:100%; height:260px; }
  .spo-text{ width:100%; }
  .spo-image-wrap{ flex-direction:column; }
}
/* ===== Color Test Interface ===== */
.color-test-overlay {
  position: fixed; inset: 0; display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,0.55); z-index:4500; padding:18px; overflow:auto;
}
.ct-panel {
  width: 100%; max-width:1100px; background:#fff; border-radius:10px; box-shadow:0 12px 40px rgba(0,0,0,0.35);
  display:flex; gap:16px; overflow:hidden;
}
.ct-left {
  flex: 1.4; background:#f7f9fb; display:flex; flex-direction:column; align-items:center; padding:18px;
}
.ct-left .ct-image {
  width:100%; max-width:640px; height:640px; background:#fff; border:1px solid rgba(0,0,0,0.06);
  display:flex; align-items:center; justify-content:center; border-radius:6px; overflow:hidden;
}
.ct-left .ct-image img{ width:100%; height:100%; object-fit:contain; }

.ct-left .ct-footer{ margin-top:8px; color:#666; font-size:13px; }

.ct-right {
  width:360px; padding:18px; display:flex; flex-direction:column; gap:12px; justify-content:flex-start;
  border-left:1px solid rgba(0,0,0,0.04);
}
.ct-timer { text-align:center; font-weight:800; font-size:34px; color:#111; margin-bottom:6px; }
.ct-input { font-size:20px; padding:10px; border-radius:8px; border:1px solid rgba(0,0,0,0.08); text-align:center; }
.keypad { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-top:8px; }
.key-btn{ padding:12px 8px; border-radius:8px; background:#fff; border:1px solid rgba(0,0,0,0.06); font-weight:700; cursor:pointer; font-size:16px; }
.key-control{ display:flex; gap:8px; margin-top:12px; }
.ct-btn{ padding:10px 12px; border-radius:8px; border:0; cursor:pointer; font-weight:800; }
.ct-skip{ background:#f39c12; color:#fff; }
.ct-ok{ background:#27ae60; color:#fff; }
.ct-meta{ font-size:13px; color:#444; display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.ct-qindex{ font-weight:700; }
.ct-actions{ display:flex; gap:8px; justify-content:center; margin-top:auto; }

@media (max-width:980px){
  .ct-panel{ flex-direction:column; max-width:820px; }
  .ct-left{ order:2; }
  .ct-right{ order:1; width:100%; border-left:none; border-top:1px solid rgba(0,0,0,0.04); }
  .ct-left .ct-image{ height:360px; }
}
